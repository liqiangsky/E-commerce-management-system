(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b56dd944"],{"159b":function(t,e,a){var r=a("da84"),o=a("fdbc"),n=a("17c2"),s=a("9112");for(var i in o){var c=r[i],l=c&&c.prototype;if(l&&l.forEach!==n)try{s(l,"forEach",n)}catch(u){l.forEach=n}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,o=a("a640"),n=a("ae40"),s=o("forEach"),i=n("forEach");t.exports=s&&i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var r=a("23e7"),o=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},a15b:function(t,e,a){"use strict";var r=a("23e7"),o=a("44ad"),n=a("fc6a"),s=a("a640"),i=[].join,c=o!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return i.call(n(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var r=a("23e7"),o=a("23cb"),n=a("a691"),s=a("50c4"),i=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),m=a("ae40"),d=u("splice"),f=m("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var a,r,u,m,d,f,v=i(this),_=s(v.length),y=o(t,_),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=_-y):(a=x-2,r=g(p(n(e),0),_-y)),_+a-r>b)throw TypeError(h);for(u=c(v,r),m=0;m<r;m++)d=y+m,d in v&&l(u,m,v[d]);if(u.length=r,a<r){for(m=y;m<_-r;m++)d=m+r,f=m+a,d in v?v[f]=v[d]:delete v[f];for(m=_;m>_-r+a;m--)delete v[m-1]}else if(a>r)for(m=_-r;m>y;m--)d=m+r-1,f=m+a-1,d in v?v[f]=v[d]:delete v[f];for(m=0;m<a;m++)v[m+y]=arguments[m+2];return v.length=_-r+a,u}})},a44a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods_add"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("商品列表")]),a("el-breadcrumb-item",[t._v("添加商品")])],1),a("el-card",{staticClass:"m-t-20"},[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":""}}),a("el-steps",{staticClass:"m-30",attrs:{active:+t.active,"align-center":"","finish-status":"success",space:"150px"}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}})],1),a("el-form",{ref:"InformationForm",attrs:{model:t.InformationForm,rules:t.rules,"label-position":"top"}},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"tab-position":"left","before-leave":t.BeforeLeaveTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.InformationForm.goods_name,callback:function(e){t.$set(t.InformationForm,"goods_name",e)},expression:"InformationForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.InformationForm.goods_price,callback:function(e){t.$set(t.InformationForm,"goods_price",e)},expression:"InformationForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.InformationForm.goods_weight,callback:function(e){t.$set(t.InformationForm,"goods_weight",e)},expression:"InformationForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:t.InformationForm.goods_number,callback:function(e){t.$set(t.InformationForm,"goods_number",e)},expression:"InformationForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:t.options,props:t.props},on:{change:t.handleChange},model:{value:t.InformationForm.goods_cat,callback:function(e){t.$set(t.InformationForm,"goods_cat",e)},expression:"InformationForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.Manyattrs,(function(e){return a("el-form-item",{key:e.attr_id+e.attr_name,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t){return a("el-checkbox",{key:t+Math.random(),attrs:{label:t,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.Onlyattrs,(function(e){return a("el-form-item",{key:e.attr_id+e.attr_name,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t){return a("el-checkbox",{key:t+Math.random(),attrs:{label:t,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:t.UpUrl,"list-type":"picture","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.OnSuccess,headers:t.headers}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{staticClass:"quill-editor",model:{value:t.InformationForm.goods_introduce,callback:function(e){t.$set(t.InformationForm,"goods_introduce",e)},expression:"InformationForm.goods_introduce"}}),a("el-button",{staticClass:"m-t-20",attrs:{type:"primary"},on:{click:t.SubmitForm}},[t._v("添加商品")])],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.url}})],1)],1)],1)},o=[],n=(a("c740"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),s={data:function(){return{dialogVisible:!1,loading:!1,UpUrl:"http://timemeetyou.com:8889/api/private/v1/upload",url:"",headers:{Authorization:window.sessionStorage.token},active:"0",type:"",message:"",InformationForm:{goods_name:"",goods_cat:"",goods_price:0,goods_number:0,goods_weight:0,goods_introduce:"",pics:[],attrs:[]},Manyattrs:[],Onlyattrs:[],Goods_cat:[],options:[],props:{expandTrigger:"hover",label:"cat_name",value:"cat_id",children:"children"},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"change"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}]}}},created:function(){this.Goods()},methods:{Goods:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:a=e.sent,200==a.meta.status&&(t.options=a.data);case 4:case"end":return e.stop()}}),e)})))()},Categories:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.loading=!0,a.t0=t,a.next="1"===a.t0?4:"2"===a.t0?8:12;break;case 4:return a.next=6,e.$http.get("categories/".concat(e.cateid,"/attributes"),{params:{sel:"many"}});case 6:return r=a.sent,a.abrupt("break",12);case 8:return a.next=10,e.$http.get("categories/".concat(e.cateid,"/attributes"),{params:{sel:"only"}});case 10:return r=a.sent,a.abrupt("break",12);case 12:if(200!=r.meta.status){a.next=29;break}r.data.forEach((function(t){t.attr_vals=0===t.attr_vals.length?[]:t.attr_vals.split(" ")})),a.t1=t,a.next="1"===a.t1?17:"2"===a.t1?22:27;break;case 17:return e.Manyattrs=[],e.Manyattrs=r.data,e.type="success",e.message="获取动态参数成功！",a.abrupt("break",27);case 22:return e.Onlyattrs=[],e.Onlyattrs=r.data,e.type="success",e.message="获取静态参数成功！",a.abrupt("break",27);case 27:a.next=31;break;case 29:e.type="error",e.message="error";case 31:e.$message({type:e.type,message:e.message}),e.loading=!1;case 33:case"end":return a.stop()}}),a)})))()},Attr:function(t,e){t.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals.join(" ")};e.push(a)}))},SubmitForm:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.InformationForm.attrs=[],t.InformationForm.goods_cat=t.Goods_cat.join(","),t.Attr(t.Manyattrs,t.InformationForm.attrs),t.Attr(t.Onlyattrs,t.InformationForm.attrs),e.next=6,t.$http.post("goods",t.InformationForm);case 6:a=e.sent,201==a.meta.status?(t.$router.push("/goods"),t.type="success",t.message=a.meta.msg):(t.type="error",t.message=a.meta.msg),t.$message({type:t.type,message:t.message});case 9:case"end":return e.stop()}}),e)})))()},BeforeLeaveTab:function(t,e){var a=this;if("0"===e&&this.$refs.InformationForm.validate((function(t){t||a.$message.error("请先按要求填写信息！")})),"0"===e&&3!==this.Goods_cat.length||""===this.InformationForm.goods_name)return!1;1!==+t&&2!==+t||this.Categories(t)},OnSuccess:function(t,e,a){200==t.meta.status&&(this.$message({type:"success",message:"图片暂存成功！"}),this.InformationForm.pics.push(t.data.tmp_path))},handleRemove:function(t,e){var a=this.InformationForm.pics.findIndex((function(e){return t.response.data.tmp_path===e}));this.InformationForm.pics.splice(a,1)},handlePreview:function(t){this.dialogVisible=!0,this.url=t.response.data.url},handleChange:function(t){this.Goods_cat=t}},computed:{cateid:function(){return 3===this.Goods_cat.length?this.Goods_cat[2]:null}}},i=s,c=(a("ddbc"),a("2877")),l=Object(c["a"])(i,r,o,!1,null,null,null);e["default"]=l.exports},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},c740:function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").findIndex,n=a("44d2"),s=a("ae40"),i="findIndex",c=!0,l=s(i);i in[]&&Array(1)[i]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(i)},ddbc:function(t,e,a){"use strict";a("f8f6")},f8f6:function(t,e,a){},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-b56dd944.a4723b32.js.map