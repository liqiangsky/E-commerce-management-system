(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-212ec032"],{"0d77":function(t,e,a){},"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),s=a("17c2"),i=a("9112");for(var o in n){var l=r[o],c=l&&l.prototype;if(c&&c.forEach!==s)try{i(c,"forEach",s)}catch(u){c.forEach=s}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),s=a("ae40"),i=n("forEach"),o=s("forEach");t.exports=i&&o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"498a":function(t,e,a){"use strict";var r=a("23e7"),n=a("58a8").trim,s=a("c8d2");r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},5794:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("参数列表")])],1),a("el-card",{staticClass:"m-t-20"},[a("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数",type:"warning","show-icon":""}}),a("el-form",{ref:"ParamsForm",staticClass:"m-t-20",attrs:{model:t.ParamsForm}},[a("el-form-item",{attrs:{label:"选择商品分类:"}},[a("el-cascader",{attrs:{options:t.options,props:t.props},on:{change:t.handleChange},model:{value:t.ParamsForm.goods_cat,callback:function(e){t.$set(t.ParamsForm,"goods_cat",e)},expression:"ParamsForm.goods_cat"}})],1)],1),a("el-tabs",{attrs:{"before-leave":t.handleLeave},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:3!==t.Goods_cat.length},on:{click:function(e){return t.Add("many")}}},[t._v("添加参数")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-t-20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{width:"50",type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:r+n+Math.random(),staticClass:"m-10",attrs:{closable:"","disable-transitions":!0},on:{close:function(a){return t.handleClose(e.row,r)}}},[t._v(" "+t._s(r)+" ")])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"#",width:"50",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.Edit(e.row,t.sel)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.Delete(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态参数",name:"1"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:3!==t.Goods_cat.length},on:{click:function(e){return t.Add("only")}}},[t._v("添加参数")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-t-20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{width:"50",type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:r+n+Math.random(),staticClass:"m-10",attrs:{closable:"","disable-transitions":!0},on:{close:function(a){return t.handleClose(e.row,r)}}},[t._v(" "+t._s(r)+" ")])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"#",width:"50",type:"index"}}),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.Edit(e.row,t.sel)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.Delete(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"50%","destroy-on-close":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ParameterForm",attrs:{model:t.ParameterForm,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.label,prop:"attr_name"}},[a("el-input",{model:{value:t.ParameterForm.attr_name,callback:function(e){t.$set(t.ParameterForm,"attr_name",e)},expression:"ParameterForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.SubmitForm("ParameterForm")}}},[t._v("确 定")])],1)],1)],1)],1)},n=[],s=(a("99af"),a("7db0"),a("c740"),a("4160"),a("c975"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("96cf"),a("1da1")),i={data:function(){return{dialogVisible:!1,title:"",label:"",ParameterForm:{attr_name:"",attr_sel:"",attr_vals:""},attr_id:0,ParamsForm:{goods_cat:[]},type:"",message:"",options:[],props:{expandTrigger:"hover",label:"cat_name",value:"cat_id",children:"children"},Goods_cat:[],active:"0",loading:!1,tableData:[],sel:"many",rules:{attr_name:[{required:!0,message:"此选项不能为空！",trigger:"blur"}]},mode:""}},created:function(){this.Goods()},methods:{Goods:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:a=e.sent,200==a.meta.status?(t.options=a.data,t.type="success",t.message="获取商品分类成功！"):(t.type="error",t.message="获取商品分类失败！"),t.$message({type:t.type,message:t.message});case 5:case"end":return e.stop()}}),e)})))()},handleChange:function(t){this.Goods_cat=t,this.attr_vals()},handleLeave:function(t,e){switch(+t){case 0:this.sel="many";break;case 1:this.sel="only";break}3===this.Goods_cat.length&&this.attr_vals()},attr_vals:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories/".concat(t.cateid,"/attributes"),{params:{sel:t.sel}});case 2:a=e.sent,200==a.meta.status?(a.data.forEach((function(t){t.inputVisible=!1,t.inputValue="",t.attr_vals=""!==t.attr_vals?t.attr_vals.split(" "):[]})),t.tableData=a.data,t.type="success",t.message="获取参数列表成功！"):(t.type="error",t.message="获取参数列表失败！"),t.$message({type:t.type,message:t.message});case 5:case"end":return e.stop()}}),e)})))()},Add:function(t){switch(this.dialogVisible=!0,this.ParameterForm.attr_name="",this.mode="post",t){case"many":this.title="添加动态参数",this.label="动态参数";break;case"only":this.title="添加静态属性",this.label="静态属性";break}},Edit:function(t,e){switch(this.dialogVisible=!0,this.mode="put",e){case"many":this.title="修改动态参数",this.label="动态参数",this.sel=e;break;case"only":this.title="修改静态属性",this.label="静态属性",this.sel=e;break}this.attr_id=t.attr_id,this.ParameterForm.attr_sel=e,this.ParameterForm.attr_vals=t.attr_vals,this.ParameterForm.attr_name=t.attr_name},SubmitForm:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=56;break}t.t0=e.mode,t.next="put"===t.t0?4:"post"===t.t0?30:54;break;case 4:return t.next=6,e.$http.put("categories/".concat(e.cateid,"/attributes/").concat(e.attr_id),e.ParameterForm);case 6:if(r=t.sent,200!=r.meta.status){t.next=21;break}e.type="success",t.t1=e.sel,t.next="many"===t.t1?12:"only"===t.t1?14:16;break;case 12:return e.message="修改动态参数成功！",t.abrupt("break",16);case 14:return e.message="修改静态参数成功！",t.abrupt("break",16);case 16:n=e.tableData.find((function(t){return t.attr_id===r.data.attr_id})),n.attr_name=r.data.attr_name,e.dialogVisible=!1,t.next=29;break;case 21:e.type="error",t.t2=e.sel,t.next="many"===t.t2?25:"only"===t.t2?27:29;break;case 25:return e.message="修改动态参数失败！",t.abrupt("break",29);case 27:return e.message="修改静态参数失败！",t.abrupt("break",29);case 29:return t.abrupt("break",54);case 30:return t.next=32,e.$http.post("categories/".concat(e.cateid,"/attributes"),{attr_name:e.ParameterForm.attr_name,attr_sel:e.sel});case 32:if(s=t.sent,201!=s.meta.status){t.next=46;break}e.type="success",t.t3=e.sel,t.next="many"===t.t3?38:"only"===t.t3?40:42;break;case 38:return e.message="添加动态参数成功！",t.abrupt("break",42);case 40:return e.message="添加静态参数成功！",t.abrupt("break",42);case 42:e.tableData.push(s.data),e.dialogVisible=!1,t.next=54;break;case 46:e.type="error",t.t4=e.sel,t.next="many"===t.t4?50:"only"===t.t4?52:54;break;case 50:return e.message="添加动态参数失败！",t.abrupt("break",54);case 52:return e.message="添加静态参数失败！",t.abrupt("break",54);case 54:t.next=58;break;case 56:e.type="error",e.message="error";case 58:e.$message({type:e.type,message:e.message});case 59:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Delete:function(t){var e=this;this.$confirm("此操作将永久删除该参/属性, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http["delete"]("categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id));case 2:r=a.sent,200==r.meta.status&&(e.type="success",e.message=r.meta.msg,n=e.tableData.findIndex((function(e){return e.attr_id===t.attr_id})),e.tableData.splice(n,1)),e.$message({type:e.type,message:e.message});case 5:case"end":return a.stop()}}),a)}))))["catch"]((function(){e.$message({type:"info",message:"已取消删除"})}))},handleClose:function(t,e){t.attr_vals.splice(t.attr_vals.indexOf(e),1),this.Vals(t)},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},Vals:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.put("categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:e.sel,attr_vals:t.attr_vals.join(" ")});case 2:r=a.sent,200==r.meta.status?(e.type="success",e.message="修改参数项成功！"):(e.type="success",e.message="修改参数项失败！"),e.$message({type:e.type,message:e.message});case 5:case"end":return a.stop()}}),a)})))()},handleInputConfirm:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.inputValue,0!==r.trim().length&&(t.attr_vals.push(r.trim()),e.Vals(t)),t.inputVisible=!1,t.inputValue="";case 4:case"end":return a.stop()}}),a)})))()}},computed:{cateid:function(){if(3===this.Goods_cat.length)return this.Goods_cat[2]}}},o=i,l=(a("e72b"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),s="["+n+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),l=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"7db0":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").find,s=a("44d2"),i=a("ae40"),o="find",l=!0,c=i(o);o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),s=a("fc6a"),i=a("a640"),o=[].join,l=n!=Object,c=i("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),s=a("a691"),i=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),m=a("ae40"),d=u("splice"),p=m("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var a,r,u,m,d,p,v=o(this),y=i(v.length),_=n(t,y),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=y-_):(a=w-2,r=b(f(s(e),0),y-_)),y+a-r>h)throw TypeError(g);for(u=l(v,r),m=0;m<r;m++)d=_+m,d in v&&c(u,m,v[d]);if(u.length=r,a<r){for(m=_;m<y-r;m++)d=m+r,p=m+a,d in v?v[p]=v[d]:delete v[p];for(m=y;m>y-r+a;m--)delete v[m-1]}else if(a>r)for(m=y-r;m>_;m--)d=m+r-1,p=m+a-1,d in v?v[p]=v[d]:delete v[p];for(m=0;m<a;m++)v[m+_]=arguments[m+2];return v.length=y-r+a,u}})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},c740:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").findIndex,s=a("44d2"),i=a("ae40"),o="findIndex",l=!0,c=i(o);o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},c8d2:function(t,e,a){var r=a("d039"),n=a("5899"),s="​᠎";t.exports=function(t){return r((function(){return!!n[t]()||s[t]()!=s||n[t].name!==t}))}},c975:function(t,e,a){"use strict";var r=a("23e7"),n=a("4d64").indexOf,s=a("a640"),i=a("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),u=i("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(t){return l?o.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},e72b:function(t,e,a){"use strict";a("0d77")},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-212ec032.7829a085.js.map