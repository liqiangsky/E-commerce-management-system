{"remainingRequest":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\我的git\\E-commerce-management-system\\dianshangsystem\\src\\components\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\src\\components\\Roles.vue","mtime":1609319802773},{"path":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的git\\E-commerce-management-system\\dianshangsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGRhdGE6IFtdLA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICB0aXRsZTogIiIsDQogICAgICBGb3JtTmFtZTogIiIsDQogICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICBtZXNzYWdlOiAi6I635Y+W6KeS6Imy5YiX6KGo5oiQ5Yqf77yBIiwNCiAgICAgIEdldENoZWNrOiBbXSwNCiAgICAgIFJvbGVGb3JtOiB7DQogICAgICAgIGlkOiAiIiwNCiAgICAgICAgcm9sZU5hbWU6ICIiLA0KICAgICAgICByb2xlRGVzYzogIiIsDQogICAgICB9LA0KICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLA0KICAgICAgICBsYWJlbDogImF1dGhOYW1lIiwNCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICByb2xlTmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXop5LoibLlkI3np7AiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLlJvbGVzKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBSb2xlcygpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgicm9sZXMiKTsNCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIE9wZXJhdGlvbih0eXBlLCByb3cpIHsNCiAgICAgIHN3aXRjaCAodHlwZSkgew0KICAgICAgICBjYXNlICJBZGQiOg0KICAgICAgICAgIHRoaXMudGl0bGUgPSAi5re75Yqg6KeS6ImyIjsNCiAgICAgICAgICB0aGlzLkZvcm1OYW1lID0gIlJvbGVGb3JtIjsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiRWRpdCI6DQogICAgICAgICAgdGhpcy50aXRsZSA9ICLkv67mlLnop5LoibIiOw0KICAgICAgICAgIHRoaXMuRm9ybU5hbWUgPSAiUm9sZUZvcm0iOw0KICAgICAgICAgIHRoaXMuUm9sZUZvcm0uaWQgPSByb3cuaWQ7DQogICAgICAgICAgdGhpcy5Sb2xlRm9ybS5yb2xlTmFtZSA9IHJvdy5yb2xlTmFtZTsNCiAgICAgICAgICB0aGlzLlJvbGVGb3JtLnJvbGVEZXNjID0gcm93LnJvbGVEZXNjOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJTZXR0aW5nIjoNCiAgICAgICAgICB0aGlzLnRpdGxlID0gIuWIhumFjeadg+mZkCI7DQogICAgICAgICAgdGhpcy5Sb2xlRm9ybS5pZCA9IHJvdy5pZDsNCiAgICAgICAgICB0aGlzLkZvcm1OYW1lID0gIlJvbGVUcmVlIjsNCiAgICAgICAgICB0aGlzLkdldENoZWNrID0gW107DQogICAgICAgICAgdGhpcy5HZXRDaGVja0xpc3Qocm93LCB0aGlzLkdldENoZWNrKTsNCiAgICAgICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoInJpZ2h0cy90cmVlIik7DQogICAgICAgICAgdGhpcy5kYXRhID0gcmVzLmRhdGE7DQogICAgICB9DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgLy/kuInnuqfmnYPpmZDmiYDmnIlpZCzpgJLlvZLlh73mlbANCiAgICBHZXRDaGVja0xpc3Qobm9kZSwgYXJyKSB7DQogICAgICBpZiAoIW5vZGUuY2hpbGRyZW4pIHsNCiAgICAgICAgcmV0dXJuIGFyci5wdXNoKG5vZGUuaWQpOw0KICAgICAgfQ0KICAgICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLkdldENoZWNrTGlzdChpdGVtLCBhcnIpKTsNCiAgICB9LA0KICAgIENsb3NlVGFnKHJvdywgcmlnaHQsIGFycikgew0KICAgICAgdGhpcy4kY29uZmlybSgi5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/IiwgIuaPkOekuiIsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwNCiAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKA0KICAgICAgICAgICAgYHJvbGVzLyR7cm93LmlkfS9yaWdodHMvJHtyaWdodC5pZH1gDQogICAgICAgICAgKTsNCiAgICAgICAgICBpZiAocmVzLm1ldGEuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgICAgYXJyLnNwbGljZShhcnIuaW5kZXhPZihyaWdodCksIDEpOw0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgbWVzc2FnZTogIuWPlua2iOWIhumFjeadg+mZkOaIkOWKn++8gSIsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIFN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgIGlmIChmb3JtTmFtZSA9PT0gIlJvbGVUcmVlIikgew0KICAgICAgICBjb25zdCBhcnIgPSBbDQogICAgICAgICAgLi4udGhpcy4kcmVmc1tmb3JtTmFtZV0uZ2V0Q2hlY2tlZEtleXMoKSwNCiAgICAgICAgICAuLi50aGlzLiRyZWZzW2Zvcm1OYW1lXS5nZXRIYWxmQ2hlY2tlZEtleXMoKSwNCiAgICAgICAgXTsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KGByb2xlcy8ke3RoaXMuUm9sZUZvcm0uaWR9L3JpZ2h0c2AsIHsNCiAgICAgICAgICByaWRzOiBhcnIuam9pbigiLCIpLA0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLnR5cGUgPSAic3VjY2VzcyI7DQogICAgICAgICAgdGhpcy5tZXNzYWdlID0gIuWIhumFjeadg+mZkOaIkOWKn++8gSI7DQogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5Sb2xlcygpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMudHlwZSA9ICJlcnJvciI7DQogICAgICAgICAgdGhpcy5tZXNzYWdlID0gImVycm9yIjsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7DQogICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGl0bGUpIHsNCiAgICAgICAgICAgICAgY2FzZSAi5re75Yqg6KeS6ImyIjoNCiAgICAgICAgICAgICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJyb2xlcyIsIHRoaXMuUm9sZUZvcm0pOw0KICAgICAgICAgICAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgPT0gMjAxKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSAic3VjY2VzcyI7DQogICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAi5re75Yqg6KeS6Imy5L+h5oGv5oiQ5Yqf77yBIjsNCiAgICAgICAgICAgICAgICAgIHRoaXMuUm9sZXMoKTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSAiZXJyb3IiOw0KICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gImVycm9yIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgIuS/ruaUueinkuiJsiI6DQogICAgICAgICAgICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucHV0KGByb2xlcy8ke3RoaXMuUm9sZUZvcm0uaWR9YCwgew0KICAgICAgICAgICAgICAgICAgcm9sZU5hbWU6IHRoaXMuUm9sZUZvcm0ucm9sZU5hbWUsDQogICAgICAgICAgICAgICAgICByb2xlRGVzYzogdGhpcy5Sb2xlRm9ybS5yb2xlRGVzYywNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLm1ldGEuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gInN1Y2Nlc3MiOw0KICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gIuS/ruaUueinkuiJsuaIkOWKnyEiOw0KICAgICAgICAgICAgICAgICAgdGhpcy5Sb2xlcygpOw0KICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9ICJlcnJvciI7DQogICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiZXJyb3IiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35YWI5oyJ6KaB5rGC5aGr5YaZ5L+h5oGv77yBIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIERlbGV0ZShyb3cpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeeUqOaIt+S/oeaBrywg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgIH0pDQogICAgICAgIC50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLmRlbGV0ZShgcm9sZXMvJHtyb3cuaWR9YCk7DQogICAgICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMudHlwZSA9ICJzdWNjZXNzIjsNCiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICLliKDpmaTnlKjmiLfmiJDlip/vvIEiOw0KICAgICAgICAgICAgdGhpcy5Sb2xlcygpOw0KICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMudHlwZSA9ICJlcnJvciI7DQogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiZXJyb3IiOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Roles.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"roles\">\r\n    <el-breadcrumb separator=\"/\">\r\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card class=\"m-t-20\">\r\n      <el-button type=\"primary\" @click=\"Operation('Add')\">添加角色</el-button>\r\n      <el-table\r\n        :data=\"tableData\"\r\n        v-loading=\"loading\"\r\n        border\r\n        style=\"width: 100%\"\r\n        class=\"m-t-20\"\r\n      >\r\n        <el-table-column width=\"50\" type=\"expand\">\r\n          <template slot-scope=\"scope\">\r\n            <el-row\r\n              class=\"center\"\r\n              v-for=\"(i, index) in scope.row.children\"\r\n              :key=\"i.id + i.authName\"\r\n              :class=\"['border-bottom', index === 0 ? 'border-top' : '']\"\r\n            >\r\n              <!-- 一级权限 -->\r\n              <el-col :span=\"4\">\r\n                <el-tag\r\n                  type=\"danger\"\r\n                  closable\r\n                  @close=\"CloseTag(scope.row, i, scope.row.children)\"\r\n                  class=\"m-10\"\r\n                  >{{ i.authName }}</el-tag\r\n                >\r\n                <i class=\"el-icon-caret-right\"></i>\r\n              </el-col>\r\n              <!-- 二级权限 -->\r\n              <el-col :span=\"20\">\r\n                <el-row\r\n                  v-for=\"(j, index) in i.children\"\r\n                  :key=\"j.id + j.authName\"\r\n                  :class=\"[index !== 0 ? 'border-top' : '']\"\r\n                >\r\n                  <el-col :span=\"4\">\r\n                    <el-tag\r\n                      type=\"success\"\r\n                      closable\r\n                      @close=\"CloseTag(scope.row, j, i.children)\"\r\n                      class=\"m-10\"\r\n                      >{{ j.authName }}</el-tag\r\n                    >\r\n                    <i class=\"el-icon-caret-right\"></i>\r\n                  </el-col>\r\n                  <!-- 三级权限 -->\r\n                  <el-col :span=\"20\">\r\n                    <el-tag\r\n                      type=\"warning\"\r\n                      closable\r\n                      @close=\"CloseTag(scope.row, k, j.children)\"\r\n                      class=\"m-10\"\r\n                      v-for=\"k in j.children\"\r\n                      :key=\"k.id + k.authName\"\r\n                      >{{ k.authName }}</el-tag\r\n                    >\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"#\" width=\"50\" type=\"index\"></el-table-column>\r\n        <el-table-column label=\"角色名称\" prop=\"roleName\"> </el-table-column>\r\n        <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"300\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"small\"\r\n              @click=\"Operation('Edit', scope.row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"small\"\r\n              @click=\"Delete(scope.row)\"\r\n              >删除</el-button\r\n            >\r\n            <el-button\r\n              type=\"warning\"\r\n              icon=\"el-icon-s-tools\"\r\n              size=\"small\"\r\n              @click=\"Operation('Setting', scope.row)\"\r\n              >分配权限</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-dialog\r\n        :title=\"title\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"50%\"\r\n        :destroy-on-close=\"true\"\r\n      >\r\n        <el-form\r\n          ref=\"RoleForm\"\r\n          :model=\"RoleForm\"\r\n          :rules=\"rules\"\r\n          label-width=\"80px\"\r\n          v-show=\"title !== '分配权限'\"\r\n        >\r\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n            <el-input\r\n              v-model=\"RoleForm.roleName\"\r\n              placeholder=\"请输入角色名称\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"角色描述\">\r\n            <el-input\r\n              v-model=\"RoleForm.roleDesc\"\r\n              placeholder=\"请输入角色描述\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-tree\r\n          ref=\"RoleTree\"\r\n          :data=\"data\"\r\n          show-checkbox\r\n          node-key=\"id\"\r\n          :props=\"defaultProps\"\r\n          :default-checked-keys=\"GetCheck\"\r\n          default-expand-all\r\n          v-show=\"title === '分配权限'\"\r\n        ></el-tree>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"SubmitForm(FormName)\"\r\n            >确 定</el-button\r\n          >\r\n        </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      tableData: [],\r\n      data: [],\r\n      dialogVisible: false,\r\n      title: \"\",\r\n      FormName: \"\",\r\n      type: \"success\",\r\n      message: \"获取角色列表成功！\",\r\n      GetCheck: [],\r\n      RoleForm: {\r\n        id: \"\",\r\n        roleName: \"\",\r\n        roleDesc: \"\",\r\n      },\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"authName\",\r\n      },\r\n      rules: {\r\n        roleName: [\r\n          { required: true, message: \"请输入角色名称\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.Roles();\r\n  },\r\n  methods: {\r\n    async Roles() {\r\n      this.loading = true;\r\n      const res = await this.$http.get(\"roles\");\r\n      if (res.meta.status == 200) {\r\n        this.$message({\r\n          type: this.type,\r\n          message: this.message,\r\n        });\r\n        this.tableData = res.data;\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async Operation(type, row) {\r\n      switch (type) {\r\n        case \"Add\":\r\n          this.title = \"添加角色\";\r\n          this.FormName = \"RoleForm\";\r\n          break;\r\n        case \"Edit\":\r\n          this.title = \"修改角色\";\r\n          this.FormName = \"RoleForm\";\r\n          this.RoleForm.id = row.id;\r\n          this.RoleForm.roleName = row.roleName;\r\n          this.RoleForm.roleDesc = row.roleDesc;\r\n          break;\r\n        case \"Setting\":\r\n          this.title = \"分配权限\";\r\n          this.RoleForm.id = row.id;\r\n          this.FormName = \"RoleTree\";\r\n          this.GetCheck = [];\r\n          this.GetCheckList(row, this.GetCheck);\r\n          var res = await this.$http.get(\"rights/tree\");\r\n          this.data = res.data;\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    //三级权限所有id,递归函数\r\n    GetCheckList(node, arr) {\r\n      if (!node.children) {\r\n        return arr.push(node.id);\r\n      }\r\n      node.children.forEach((item) => this.GetCheckList(item, arr));\r\n    },\r\n    CloseTag(row, right, arr) {\r\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(async () => {\r\n          const res = await this.$http.delete(\r\n            `roles/${row.id}/rights/${right.id}`\r\n          );\r\n          if (res.meta.status == 200) {\r\n            arr.splice(arr.indexOf(right), 1);\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"取消分配权限成功！\",\r\n            });\r\n            this.dialogVisible = false;\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    async SubmitForm(formName) {\r\n      if (formName === \"RoleTree\") {\r\n        const arr = [\r\n          ...this.$refs[formName].getCheckedKeys(),\r\n          ...this.$refs[formName].getHalfCheckedKeys(),\r\n        ];\r\n        const res = await this.$http.post(`roles/${this.RoleForm.id}/rights`, {\r\n          rids: arr.join(\",\"),\r\n        });\r\n        if (res.meta.status == 200) {\r\n          this.type = \"success\";\r\n          this.message = \"分配权限成功！\";\r\n          this.dialogVisible = false;\r\n          this.Roles();\r\n        } else {\r\n          this.type = \"error\";\r\n          this.message = \"error\";\r\n        }\r\n      } else {\r\n        this.$refs[formName].validate(async (valid) => {\r\n          if (valid) {\r\n            switch (this.title) {\r\n              case \"添加角色\":\r\n                var res = await this.$http.post(\"roles\", this.RoleForm);\r\n                if (res.meta.status == 201) {\r\n                  this.type = \"success\";\r\n                  this.message = \"添加角色信息成功！\";\r\n                  this.Roles();\r\n                  this.dialogVisible = false;\r\n                } else {\r\n                  this.type = \"error\";\r\n                  this.message = \"error\";\r\n                }\r\n                break;\r\n              case \"修改角色\":\r\n                var res = await this.$http.put(`roles/${this.RoleForm.id}`, {\r\n                  roleName: this.RoleForm.roleName,\r\n                  roleDesc: this.RoleForm.roleDesc,\r\n                });\r\n                if (res.meta.status == 200) {\r\n                  this.type = \"success\";\r\n                  this.message = \"修改角色成功!\";\r\n                  this.Roles();\r\n                  this.dialogVisible = false;\r\n                } else {\r\n                  this.type = \"error\";\r\n                  this.message = \"error\";\r\n                }\r\n                break;\r\n            }\r\n          } else {\r\n            this.$message.error(\"请先按要求填写信息！\");\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    Delete(row) {\r\n      this.$confirm(\"此操作将永久删除该用户信息, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(async () => {\r\n          const res = await this.$http.delete(`roles/${row.id}`);\r\n          if (res.meta.status == 200) {\r\n            this.type = \"success\";\r\n            this.message = \"删除用户成功！\";\r\n            this.Roles();\r\n            this.dialogVisible = false;\r\n          } else {\r\n            this.type = \"error\";\r\n            this.message = \"error\";\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.border-top {\r\n  border-top: 1px solid #e3e3e3;\r\n}\r\n.border-bottom {\r\n  border-bottom: 1px solid #e3e3e3;\r\n}\r\n.center {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>"]}]}